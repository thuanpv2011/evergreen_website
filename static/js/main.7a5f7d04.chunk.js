(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a(62)},37:function(e,t,a){},60:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),l=a.n(c),o=(a(37),a(65)),s=a(66),u=a(64),i=a(3),m=a(63),p="/",h="/login",v="/signup",f="SET_AUTH_USER";var b=function(){var e=Object(i.b)();return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"navbar-left"},r.a.createElement(m.a,{to:p},"HOME")),r.a.createElement("div",{className:"navbar-right",style:{justifyContent:"flex-end"}},r.a.createElement(m.a,{to:p,onClick:function(){e({type:f,authUser:null}),localStorage.removeItem("token")}},"LOGOUT")))};var d=function(){return r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{className:"navbar-left"},r.a.createElement(m.a,{to:p},"HOME")),r.a.createElement("div",{className:"navbar-right"},r.a.createElement(m.a,{to:v},"SIGN UP"),r.a.createElement(m.a,{to:h},"LOGIN")))};var E=function(){var e=Object(n.useCallback)(function(e){return{authUser:e.sessionState.authUser}},[]);return Object(i.c)(e).authUser?r.a.createElement(b,null):r.a.createElement(d,null)};var g=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"EGT-Home"),r.a.createElement("p",null,"You are logged in"))};var O=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Home"),r.a.createElement("p",null,"Homepage for everyone"))};var j=function(){var e=Object(n.useCallback)(function(e){return{authUser:e.sessionState.authUser}},[]);return Object(i.c)(e).authUser?r.a.createElement(g,null):r.a.createElement(O,null)},y=a(8),k=a.n(y),w=a(9),x=a(7),S=a(10),U=a.n(S),N=a(67);var _=Object(N.a)(function(e){var t=Object(n.useState)(""),a=Object(x.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),s=Object(x.a)(o,2),u=s[0],m=s[1],h=Object(n.useState)(""),v=Object(x.a)(h,2),b=v[0],d=v[1],E=Object(n.useState)(null),g=Object(x.a)(E,2),O=g[0],j=g[1],y=Object(n.useState)(!1),S=Object(x.a)(y,2),N=S[0],_=S[1],C=Object(i.b)(),I=function(e){return function(t){e(t.target.value)}},q=function(){var t=Object(w.a)(k.a.mark(function t(a){var n,r,l,o,s,i;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),_(!0),t.prev=2,n={query:'\n                    mutation {\n                        createUser(userInput: {\n                            email: "'.concat(c,'"\n                            password: "').concat(u,'"\n                            confirm: "').concat(b,'"\n                        }) {\n                            _id\n                            token\n                            email\n                        }\n                    }\n                ')},t.next=6,U.a.post("http://localhost:5000/graphql",n);case 6:if(r=t.sent,!(l=r.data).errors){t.next=13;break}j(l.errors[0].message),_(!1),t.next=23;break;case 13:return j(null),_(!1),t.next=17,l.data.createUser;case 17:o=t.sent,s=o._id,i=o.token,C({type:f,authUser:{_id:s,email:c}}),localStorage.setItem("token",i),e.history.push(p);case 23:t.next=29;break;case 25:t.prev=25,t.t0=t.catch(2),j(t.t0),_(!1);case 29:case"end":return t.stop()}},t,this,[[2,25]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Sign up"),r.a.createElement("div",{className:"auth-form"},r.a.createElement("form",{onSubmit:q},r.a.createElement("input",{className:"form-input",type:"email",placeholder:"Email",value:c,onChange:I(l)}),r.a.createElement("input",{className:"form-input",type:"password",placeholder:"Password",value:u,onChange:I(m)}),r.a.createElement("input",{className:"form-input",type:"password",placeholder:"Confirm password",value:b,onChange:I(d)}),r.a.createElement("div",null,r.a.createElement("span",{style:{color:"red"}},O||"")),r.a.createElement("input",{className:"form-submit",type:"submit",value:N?"Verifying...":"Register"}))))});var C=Object(N.a)(function(e){var t=Object(n.useState)(""),a=Object(x.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),s=Object(x.a)(o,2),u=s[0],m=s[1],h=Object(n.useState)(null),v=Object(x.a)(h,2),b=v[0],d=v[1],E=Object(n.useState)(!1),g=Object(x.a)(E,2),O=g[0],j=g[1],y=Object(i.b)(),S=function(e){return function(t){e(t.target.value)}},N=function(){var t=Object(w.a)(k.a.mark(function t(a){var n,r,l,o,s,i;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),j(!0),t.prev=2,n={query:'\n                    query {\n                        login(email: "'.concat(c,'", password: "').concat(u,'") {\n                            _id\n                            token\n                            email\n                        }\n                    }\n                ')},t.next=6,U.a.post("http://localhost:5000/graphql",n);case 6:if(r=t.sent,!(l=r.data).errors){t.next=13;break}d(l.errors[0].message),j(!1),t.next=23;break;case 13:return d(null),j(!1),t.next=17,l.data.login;case 17:o=t.sent,s=o._id,i=o.token,y({type:f,authUser:{_id:s,email:c}}),localStorage.setItem("token",i),e.history.push(p);case 23:t.next=29;break;case 25:t.prev=25,t.t0=t.catch(2),d(t.t0),j(!1);case 29:case"end":return t.stop()}},t,this,[[2,25]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Login"),r.a.createElement("div",{className:"auth-form"},r.a.createElement("form",{onSubmit:N},r.a.createElement("input",{className:"form-input",type:"email",placeholder:"Email",value:c,onChange:S(l)}),r.a.createElement("input",{className:"form-input",type:"password",placeholder:"Password",onChange:S(m)}),r.a.createElement("div",null,r.a.createElement("span",{style:{color:"red"}},b||"")),r.a.createElement("input",{className:"form-submit",type:"submit",value:O?"Verifying...":"Register"}))))});var I=function(){return r.a.createElement("h1",null,"Oops...Page does not exist!")};function q(){return(q=Object(w.a)(k.a.mark(function e(t){var a,n,r,c,l;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=localStorage.getItem("token"))){e.next=19;break}return e.prev=2,n={query:'\n                   query {\n                       verifyToken(token: "'.concat(a,'") {\n                           _id\n                           email\n                       }\n                   }\n                ')},e.next=6,U.a.post("http://localhost:5000/graphql",n);case 6:return r=e.sent,c=r.data,e.next=10,c.data.verifyToken;case 10:(l=e.sent)?t({type:f,authUser:{_id:l._id,email:l.email}}):(t({type:f,authUser:null}),localStorage.removeItem("token")),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),t({type:f,authUser:null});case 17:e.next=20;break;case 19:t({type:f,authUser:null});case 20:case"end":return e.stop()}},e,this,[[2,14]])}))).apply(this,arguments)}var H=function(){var e=Object(i.b)();Object(n.useEffect)(function(){!function(e){q.apply(this,arguments)}(e)})};a(60);var T=function(){H();var e=Object(n.useCallback)(function(e){return{loading:e.sessionState.loading}},[]);return Object(i.c)(e).loading?r.a.createElement("h1",null,"Loading..."):r.a.createElement(o.a,{basename:"/evergreen_website"},r.a.createElement("div",{className:"App"},r.a.createElement(E,null),r.a.createElement("header",{className:"App-header"},r.a.createElement(s.a,null,r.a.createElement(u.a,{exact:!0,path:p,component:function(){return r.a.createElement(j,null)}}),r.a.createElement(u.a,{exact:!0,path:v,component:function(){return r.a.createElement(_,null)}}),r.a.createElement(u.a,{exact:!0,path:h,component:function(){return r.a.createElement(C,null)}}),r.a.createElement(u.a,{component:I})))))},P=a(11),F=a(30),G=a.n(F),L={authUser:null,loading:!0};var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return{authUser:t.authUser,loading:!1};default:return e}},R=Object(P.b)({sessionState:A}),B=Object(P.c)(R,Object(P.a)(G.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(i.a.Provider,{value:B},r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.7a5f7d04.chunk.js.map